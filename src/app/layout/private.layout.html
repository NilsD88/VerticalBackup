<pxs-top-menu *ngIf="topMenuConfig" (languageChange)="layoutService.changeLanguage($event)"
  (contactClick)="navigateTo(['private', 'contact'])" (autocompleteClick)="autocompleteClick($event)"
  [searchResults]="searchResults" (search)="searchTerm$.next($event)" [config]="topMenuConfig">
  <pxs-menu-item label="Proximus" (action)="pxsClicked()"></pxs-menu-item>
  <pxs-menu-item label="MyThings" (action)="mtClicked()"></pxs-menu-item>
  <pxs-top-menu-actions>
    <pxs-menu-item [mat-menu-trigger-for]="user">
      <pxs-icon icon="user"></pxs-icon>
      <span class="visible-md-inline visible-lg-inline" [translate]="'LAYOUT.ACCOUNT'"></span>
      <mat-menu #user="matMenu">
        <div mat-menu-item class="mat-menu-header">
          Account
        </div>
        <div mat-menu-item>
          <button mat-menu-item (click)="layoutService.logout()">
            Logout
          </button>
        </div>
      </mat-menu>
    </pxs-menu-item>
    <pxs-menu-item [mat-menu-trigger-for]="admin" *ngIf="sharedService.user?.roles.includes('pxs:iot:localadmin')">
      <pxs-icon icon="cog"></pxs-icon>
      <span class="visible-md-inline visible-lg-inline" [translate]="'LAYOUT.ADMIN'"></span>

      <mat-menu #admin="matMenu">
        <div mat-menu-item class="mat-menu-header">
          {{ 'LAYOUT.ADMIN' | translate }}
        </div>
        <div mat-menu-item>
          <a mat-menu-item [routerLink]="['/private','admin','manage-alert-definition']" routerLinkActive="router-link-active">
            {{ 'LAYOUT.ALERT_DEFINITIONS' | translate }}
          </a>
        </div>
        <div mat-menu-item>
          <button mat-menu-item [routerLink]="['/private','admin','manage-locations']" routerLinkActive="router-link-active">
            {{ 'LAYOUT.MANAGE_LOCATIONS' | translate }}
          </button>
        </div>
        <div mat-menu-item>
          <button mat-menu-item [routerLink]="['/private','admin','manage-assets']" routerLinkActive="router-link-active">
            {{ 'LAYOUT.MANAGE_ASSETS' | translate }}
          </button>
        </div>
        <div mat-menu-item>
          <button mat-menu-item [routerLink]="['/private','admin','manage-things']" routerLinkActive="router-link-active">
            {{ 'LAYOUT.MANAGE_THINGS' | translate }}
          </button>
        </div>
        <div mat-menu-item>
          <button mat-menu-item [routerLink]="['/private','admin','manage-threshold-templates']" routerLinkActive="router-link-active">
            {{ 'LAYOUT.MANAGE_THRESHOLD_TEMPLATES' | translate }}
          </button>
        </div>
        <div mat-menu-item>
          <button mat-menu-item [routerLink]="['/private','admin','manage-points-of-attention']" routerLinkActive="router-link-active">
            {{ 'LAYOUT.MANAGE_POINTS_OF_ATTENTION' | translate }}
          </button>
        </div>
      </mat-menu>
    </pxs-menu-item>
  </pxs-top-menu-actions>
</pxs-top-menu>

<pxs-main-menu>
  <pxs-menu-item [label]="'Smart monitoring'" [url]="'/private/smartmonitoring'"
    [mat-menu-trigger-for]="smartMonitoring"></pxs-menu-item>
  <pxs-menu-item [label]="'Tank monitoring'" [url]="'/private/tankmonitoring'"
    *ngIf="layoutService.user?.hasModule('TANK_MONITORING')" [mat-menu-trigger-for]="tankMonitoring"></pxs-menu-item>
  <pxs-menu-item [label]="'Walking trail'" *ngIf="layoutService.user?.hasModule('PEOPLE_COUNTING_WALKING_TRAIL')"
    [mat-menu-trigger-for]="walkingtrail"></pxs-menu-item>
  <pxs-menu-item [label]="'Asset tracking'" *ngIf="layoutService.user?.hasModule('PEOPLE_TRACKIN')"
    [mat-menu-trigger-for]="assetTracking"></pxs-menu-item>
  <pxs-menu-item [label]="'People counting'" [mat-menu-trigger-for]="peopleCounting" *ngIf="layoutService.user?.hasModule('PEOPLE_COUNTING_RETAIL')"></pxs-menu-item>
  <pxs-menu-item [label]="'Stairway to health'" [mat-menu-trigger-for]="stairwayToHealth" *ngIf="layoutService.user?.hasModule('PEOPLE_COUNTING_STAIRWAY_TO_HEALTH')"></pxs-menu-item>
  <pxs-menu-item [label]="'LAYOUT.ALERTS' | translate" [url]="'/private/alerts'" [badge]="{
    label: numberOfUnreadAlerts,
    class: 'red-badge'
  }"></pxs-menu-item>
</pxs-main-menu>

<main>
  <router-outlet></router-outlet>
</main>

<mat-menu #smartMonitoring="matMenu" class="main-menu-dropdown">
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','smartmonitoring', 'inventory']" routerLinkActive="router-link-active">
      Inventory
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','smartmonitoring', 'assets', 'new']" routerLinkActive="router-link-active">
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New asset</span>
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','smartmonitoring', 'points-of-attention']" routerLinkActive="router-link-active">
      My points of attention
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','smartmonitoring', 'points-of-attention', 'point-of-attention', 'new']" routerLinkActive="router-link-active">
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New point of attention</span>
    </a>
  </div>
</mat-menu>

<mat-menu #tankMonitoring="matMenu" class="main-menu-dropdown">
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','tankmonitoring', 'dashboard']" routerLinkActive="router-link-active">
      Dashboard
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','tankmonitoring', 'inventory']" routerLinkActive="router-link-active">
      Tank inventory
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private', 'tankmonitoring', 'assets', 'new']" routerLinkActive="router-link-active">
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New tank</span>
    </a>
  </div>
</mat-menu>

<mat-menu #walkingtrail="matMenu" class="main-menu-dropdown">
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','walkingtrail', 'dashboard']" routerLinkActive="router-link-active">
      Dashboard
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','walkingtrail', 'overview']" routerLinkActive="router-link-active">
      Trails overview
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','walkingtrail', 'trail', 'new']" routerLinkActive="router-link-active">
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New trail</span>
    </a>
  </div>
</mat-menu>

<mat-menu #peopleCounting="matMenu" style="margin-top: 80px;">
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','peoplecounting', 'dashboard']" routerLinkActive="router-link-active">
      Dashboard
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','peoplecounting', 'overview']" routerLinkActive="router-link-active">
      Stores overview
    </a>
  </div>
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','peoplecounting', 'store', 'new']" routerLinkActive="router-link-active">
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New store</span>
    </a>
  </div>
</mat-menu>

<mat-menu #stairwayToHealth="matMenu" style="margin-top: 80px;">
  <div mat-menu-item>
    <a mat-menu-item [routerLink]="['/private','stairwaytohealth', 'dashboard']" routerLinkActive="router-link-active">
      Dashboard
    </a>
  </div>
  <div mat-menu-item>
    <button mat-menu-item [routerLink]="['/private','stairwaytohealth', 'overview']" routerLinkActive="router-link-active">
      Places overview
    </button>
  </div>
  <div mat-menu-item>
    <a mat-menu-item>
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New place</span>
    </a>
  </div>
</mat-menu>

<mat-menu #assetTracking="matMenu" class="main-menu-dropdown">
  <div mat-menu-item>
    <a mat-menu-item>
      Dashboard
    </a>
  </div>
  <div mat-menu-item>
    <button mat-menu-item>
      Locations
    </button>
  </div>
  <div mat-menu-item>
    <a mat-menu-item>
      <pxs-icon icon="plus"></pxs-icon>
      <span style="margin-left: 10px;">New Asset</span>
    </a>
  </div>
</mat-menu>

<pxs-footer [config]="footerConfig"></pxs-footer>

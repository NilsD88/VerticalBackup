<div class="container-fluid">
  <div class="row">
    <div class="col col-md-3" style="padding-right:0;">
      <div class="filters">
        <span>Battery level</span>
        <pxs-range-slider
          [min]="0"
          [max]="100"
          [startFrom]="0"
          [startTo]="100"
          [postfix]="'%'"
          (rangeChange)="updateBatteryLevelFilter($event)"
        ></pxs-range-slider>
      </div>
      <div class="filters">
        <span>Fuel level</span>
        <pxs-range-slider
        [min]="0"
        [max]="100"
        [startFrom]="0"
        [startTo]="100"
        [postfix]="'%'"
        (rangeChange)="updateFuelLevelFilter($event)"
        ></pxs-range-slider>
      </div>
      <pxs-pie-chart *ngIf="chartData" [series]="chartData" (filter)="pieClicked($event)" [height]="300" [colors]="chartColors"></pxs-pie-chart>
    </div>
    <div class="col col-md-9" style="padding-left:0;">
      <pxs-map [mode]="'TANK_MONITORING'" [assetFilter]="{property:'test', values: filter.status}"></pxs-map>
    </div>
  </div>
</div>
<div class="container">
  <div class="row" style="margin-top:25px;">
    <div class="col-xs-12 col-md-6 mx-auto">
      <mat-form-field>
        <input
        matInput
        type="text" 
        placeholder="Asset name"
        [(ngModel)]="filter.name"
        (ngModelChange)="onFilterChange()"
        >
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" style="overflow-x: scroll">
      <table 
      mat-table
      [dataSource]="dataSource"
      matSort
      style="width: 100%;"
      class="assets-list" 
      [ngClass]="{'loading': isLoading }"
      matSortDisableClear
      >
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.name}} </td>
      </ng-container>
      <ng-container matColumnDef="location.name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Location </th>
        <td mat-cell *matCellDef="let element"> {{element.location.name}} </td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let element">{{'DASHBOARD.TANK_MONITORING.STATUS.' + element.test | translate}} </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>
<mat-card *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center; border-radius: 0;">
  <mat-progress-spinner 
  color="primary" 
  mode="indeterminate">
</mat-progress-spinner>
</mat-card>
<mat-paginator 
[length]="totalItems"
[pageSize]="pageSize"
[pageSizeOptions]="pageSizeOptions"
(page)="pageChanged($event)">
</mat-paginator> 
</div>

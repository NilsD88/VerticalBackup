<div class="container">
  <div class="row">
    <div class="col-md-4">
      <h1 class="pxs-title">Manage things</h1>
    </div>
    <div class="col-md-8 manage-things-filter-container">
      <div class="row">
        <div class="col-12">
          <mat-form-field>
            <input class="name-filter-input" type="text" matInput [(ngModel)]="filter.devEui" (change)="getThings()"
                   [placeholder]="'Thing mac address'">
          </mat-form-field>
        </div>

      </div>
    </div>
  </div>

  <div class="row" *ngIf="thingsLoading">
    <div class="col-12">
      <pxs-loader></pxs-loader>
    </div>
  </div>
  <div class="row" *ngIf="!thingsLoading">
    <div class="col-md-4" *ngFor="let item of things; let i = index;">

      <div class="thing-card">

        <span class="thing-card-deveui">{{item.devEui}}</span>
        <span class="thing-card-name" *ngIf="activeInput !== i">{{item.name}}</span>
        <div class="thing-name-input" *ngIf="activeInput === i">
          <input matInput
                 type="text"
                 autofocus="true"
                 placeholder="Thing name"
                 [(ngModel)]="item.name">

          <mat-icon (click)="saveThing(item)" [matTooltip]="'Save thing'">done</mat-icon>
          <mat-icon (click)="cancelEdit()" [matTooltip]="'Cancel'">clear</mat-icon>

        </div>
        <div class="thing-icon-container">
          <div class="thing-icon" *ngFor="let sensor of item.sensors" [matTooltip]="sensor.sensorType.name">
            <img src="assets/smartmonitoring/images/icons/icon-{{sensor.sensorType.name}}-white.svg"
                 src-fallback="assets/smartmonitoring/images/icons/icon-default.svg">
          </div>
        </div>

        <button class="thing-card-edit-button" *ngIf="activeInput !== i" mat-icon-button (click)="editThingName(i)"
                [matTooltip]="'Edit name'">
          <mat-icon>create</mat-icon>
        </button>

      </div>

    </div>
  </div>
</div>
